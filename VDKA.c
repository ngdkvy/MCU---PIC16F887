#INCLUDE <16F887.H>
#FUSES HS
#DEVICE ADC = 10

#USE DELAY (CLOCK = 20M)
#USE RS232 (baud=9600, xmit = PIN_C6, rcv = PIN_C7)

UNSIGNED INT8 ND1 = 0;
CONST UNSIGNED INT8 MA7DOAN[10]={0XC0, 0XF9, 0XA4, 0XB0, 0X99, 0X92, 0X82, 0XF8, 0X80, 0X90};

VOID HIENTHI()
{
   OUTPUT_B (MA7DOAN[ND1/10]);
   OUTPUT_D (MA7DOAN[ND1%10]);
}   
VOID MAIN ()
{
   SET_TRIS_B(0X00);
   SET_TRIS_D(0X00);
   PORT_B_PULLUPS(TRUE);
   SETUP_ADC(ADC_CLOCK_DIV_2);
   SETUP_ADC_PORTS(SAN1|VSS_VDD);
   SET_ADC_CHANNEL(1);
   DELAY_US(10);
   WHILE (TRUE)
   {   
      ND1 = READ_ADC()/2.046;
      DELAY_MS(1000);
      HIENTHI();
      PUTC(ND1);
   }
}
